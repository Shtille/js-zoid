Program paint;
uses crt, graph;
Var gd,gm,x,y,i,j,xz,yz,razmz,razmb,score,lives:Integer; s,st:string; c:char; placez,placeb:pointer; lose:boolean;
procedure zoid(x,y:integer);
begin
setcolor(8);
line(x-23,y-25,x-15,y-20); {bochonok}
line(x+23,y-25,x+15,y-20);
line(x-15,y-20,x+15,y-20);
line(x-23,y-25,x-40,y-55);
line(x+23,y-25,x+40,y-55);
{line(x-23,y-25,x-23,y-55);
line(x+23,y-25,x+23,y-55); }
line(x-40,y-55,x+40,y-55);
setcolor(red);
line(x-25,y-5,x-32,y-9); {kleshni}
line(x+25,y-5,x+32,y-9);
arc(x-30,y-20,270,360,15);
arc(x+30,y-20,180,270,15);
arc(x-16,y-11,112,200,15);
arc(x+16,y-11,340,428,15);
line(x-23,y-23,x-24,y-12);
line(x+23,y-23,x+24,y-12);
line(x-24,y-12,x-15,y-20);
line(x+24,y-12,x+15,y-20);
setfillstyle(solidfill,red);
floodfill(x-26,y-7,red);
floodfill(x+26,y-7,red);
setcolor(white);
line(x-10,y+12,x+10,y+12);
line(x-10,y+12,x-20,y+15);  {ruki}
line(x+10,y+12,x+20,y+15);
line(x-20,y+15,x-30,y+5);
line(x+20,y+15,x+30,y+5);
line(x-30,y+5,x-25,y-5);
line(x+30,y+5,x+25,y-5);
line(x-20,y+30,x-40,y+5);
line(x+20,y+30,x+40,y+5);
line(x-40,y+5,x-32,y-9);
line(x+40,y+5,x+32,y-9);
line(x-25,y-5,x-32,y-9);
line(x+25,y-5,x+32,y-9);
line(x-20,y+30,x-20,y+50);  {tulovishe}
line(x+20,y+30,x+20,y+50);
line(x-20,y+50,x-18,y+80); {nogi}
line(x+20,y+50,x+18,y+80);
line(x,y+60,x-8,y+80);
line(x,y+60,x+8,y+80);
line(x-18,y+80,x-8,y+80);
line(x+18,y+80,x+8,y+80);
line(x-8,y+80,x-8,y+90);
line(x+8,y+80,x+8,y+90);
line(x-18,y+80,x-18,y+83);
line(x+18,y+80,x+18,y+83);
line(x-18,y+83,x-22,y+83);
line(x+18,y+83,x+22,y+83);
line(x-8,y+90,x-29,y+90);
line(x+8,y+90,x+29,y+90);
arc(x-22,y+90,90,180,7);
arc(x+22,y+90,0,90,7);
setfillstyle(solidfill,white);
floodfill(x,y+52,white);
setcolor(8);
line(x-20,y+50,x+20,y+50);
line(x-10,y+12,x-1,y+21);
line(x+10,y+12,x-8,y+30);
line(x-8,y+30,x-8,y+50);
circle(x-4,y+33,1);
circle(x-4,y+39,1);
circle(x-4,y+45,1);
setcolor(blue);
arc(x,y+7,180,360,10);
line(x-10,y+12,x+10,y+12);
setfillstyle(solidfill,blue);
floodfill(x,y+15,blue);
setcolor(red);
circle(x,y-5,10);      {golova}
setfillstyle(solidfill,red);
floodfill(x,y-5,red);
line(x-10,y-5,x-9,y+12);
line(x+10,y-5,x+9,y+12);
line(x-9,y+12,x+9,y+12);
floodfill(x,y+10,red);
setcolor(black);
line(x-3,y+1,x-6,y+3);
line(x+3,y+1,x+6,y+3);
line(x-6,y+3,x-8,y+9);
line(x+6,y+3,x+8,y+9);
arc(x-6,y+9,180,360,2);
arc(x+6,y+9,180,360,2);
line(x-4,y+9,x-3,y+5);
line(x+4,y+9,x+3,y+5);
arc(x-2,y+9,180,360,2);
arc(x+2,y+9,180,360,2);
line(x,y+9,x,y+6);
setcolor(white);
circle(x-5,y-3,3);
circle(x+5,y-3,3);
setfillstyle(solidfill,white);
floodfill(x-5,y-3,white);
floodfill(x+5,y-3,white);
setcolor(blue);
circle(x-5,y-3,1);
circle(x+5,y-3,1);
setfillstyle(solidfill,blue);
floodfill(x-5,y-3,blue);
floodfill(x+5,y-3,blue);
{setcolor(red);
circle(x,y,10);}      {zap.golova}
{setfillstyle(solidfill,red);
floodfill(x,y,red);
line(x-10,y,x-10,y+12);
line(x+10,y,x+10,y+12);
line(x-10,y,x-10,y+15);
line(x+10,y,x+10,y+15);
line(x-10,y+15,x-8,y+15);
line(x+10,y+15,x+8,y+15);
line(x-8,y+15,x-4,y+10);
line(x+8,y+15,x+4,y+10);
line(x-4,y+10,x,y+15);
line(x+4,y+10,x,y+15);
floodfill(x-9,y+13,red);
floodfill(x+9,y+13,red);
floodfill(x,y+13,red);
setcolor(white);
circle(x-5,y+2,3);
circle(x+5,y+2,3);
setfillstyle(solidfill,white);
floodfill(x-5,y+2,white);
floodfill(x+5,y+2,white);
setcolor(blue);
circle(x-5,y+2,1);
circle(x+5,y+2,1);
setfillstyle(solidfill,blue);
floodfill(x-5,y+2,blue);
floodfill(x+5,y+2,blue);}

end;
procedure bomb(xz,yz:integer);
begin
setcolor(8);
circle(xz,yz,10);
setfillstyle(solidfill,8);
floodfill(xz,yz,8);
setcolor(white);
line(xz+5,yz-5,xz+9,yz-9);
setcolor(red);
circle(xz+11,yz-11,2);
setfillstyle(solidfill,red);
floodfill(xz+11,yz-11,red);
setcolor(yellow);
circle(xz+11,yz-11,1);
setfillstyle(solidfill,yellow);
floodfill(xz+11,yz-11,yellow);
end;
procedure vsriv(xz,yz:integer);
begin
for j:=1 to 18 do begin
 setcolor(red);
 circle(xz+13,yz+5,j);
 setfillstyle(solidfill,red);
 floodfill(xz+13,yz+5,red);
 setcolor(yellow);
 circle(xz+13,yz+5,trunc(j/2));
 setfillstyle(solidfill,yellow);
 floodfill(xz+13,yz+5,yellow);
 delay(2000);
 end;
setfillstyle(solidfill,black);
bar(xz-5,yz-13,xz+31,yz+27);
end;
Begin
gd:=detect;
initgraph(gd,gm,'');
if graphresult <> grok then halt(1);
randomize;
zoid(100,100);
razmz:=imagesize(60,45,140,190);
getmem(placez,razmz);
getimage(60,45,140,190,placez^);
setfillstyle(solidfill,black);
bar(60,45,140,190);
bomb(100,100);
razmb:=imagesize(90,83,117,110);
getmem(placeb,razmb);
getimage(90,83,117,110,placeb^);
setfillstyle(solidfill,black);
bar(90,83,117,110);
setcolor(3);
outtextxy(220,100,'Shtille presents:');
setcolor(yellow);
outtextxy(220,130,'Dr.Zoidberd saving Earth!');
setcolor(white);
outtextxy(300,200,'Keys:');
outtextxy(250,220,'A - left, D - right');
setcolor(green);
outtextxy(200,350,'Press Enter to start the game!');
readln;
setfillstyle(solidfill,black);
bar(0,0,640,480);
setcolor(brown);
line(0,450,640,450);
setfillstyle(solidfill,6);
floodfill(70,470,6);
x:=320; y:=359; lives:=3;
zoid(x,y);
setcolor(11);
line(0,25,640,25);
setcolor(7); str(score,st); s:='Score:'+st;
outtextxy(450,10,s);
setcolor(green); str(lives,st); s:='Lives:'+st;
outtextxy(550,10,s);
setcolor(magenta);
outtextxy(10,10,'Shtille presents: Zoidberg saving Earth!');
while lives>0 do begin
if xz<>0 then begin setfillstyle(solidfill,black);
                    bar(xz,yz,xz+27,yz+27);
                    end;
xz:=27*random(20)+40; yz:=40;
i:=1; lose:=false;
while yz<400 do begin
 setfillstyle(solidfill,black);
 if yz<250 then begin
                bar(x-40,y-55,x+40,y+90);
                putimage(x-40,y-55,placez^,0);
                setfillstyle(solidfill,black);
                bar(xz,yz,xz+27,yz+27);
                yz:=yz+i; i:=i+1;
                putimage(xz,yz,placeb^,0);
                end
           else begin lose:=true;
                bar(xz,yz,xz+27,yz+27);
                yz:=yz+i; i:=i+1;
                putimage(xz,yz,placeb^,0);
                bar(x-40,y-55,x+40,y+90);
                putimage(x-40,y-55,placez^,0);
                end;
 if (keypressed) and (not lose) then begin
  c:=readkey;
  {if (c=#119) and (y>45) then begin
                     setfillstyle(solidfill,black);
                     bar(x-40,y-25,x+40,y+90);
                     y:=y-15;
                     zoid(x,y);
                     end; }
  if (c=#97) and (x>50) then begin
                     setfillstyle(solidfill,black);
                     bar(x-40,y-55,x+40,y+90);
                     x:=x-27;
                     putimage(x-40,y-55,placez^,0);
                     end;
 { if (c=#115) and (y<460) then begin
                     setfillstyle(solidfill,black);
                     bar(x-10,y-10,x+10,y+15);
                     y:=y+15;
                     zoid(x,y);
                     end;    }
  if (c=#100) and (x<590) then begin
                     setfillstyle(solidfill,black);
                     bar(x-40,y-55,x+40,y+90);
                     x:=x+27;
                     putimage(x-40,y-55,placez^,0);
                     end;
  if c=#27 then exit;
 end;
 delay(40000-score*10);
end;
if abs((xz+15)-x)<40 then begin
                     score:=score+1;
                     setfillstyle(solidfill,black);
                     bar(450,10,520,23);
                     setcolor(7); str(score,st); s:='Score:'+st;
                     outtextxy(450,10,s);
                     end
                else begin
                     setfillstyle(solidfill,black);
                     bar(xz,yz,xz+27,yz+27);
                     vsriv(xz,yz);
                     lives:=lives-1;
                     setfillstyle(solidfill,black);
                     bar(550,10,620,23);
                     setcolor(green); str(lives,st); s:='Lives:'+st;
                     outtextxy(550,10,s);
                     end;
end;
freemem(placez,razmz);
freemem(placeb,razmb);
for j:=1 to 18 do begin
 setcolor(red);
 circle(xz+13,yz+5,j);
 setfillstyle(solidfill,red);
 floodfill(xz+15,yz-15,red);
 setcolor(yellow);
 circle(xz+13,yz+5,trunc(j/2));
 setfillstyle(solidfill,yellow);
 floodfill(xz+15,yz-15,yellow);
 delay(2000);
 end;
setfillstyle(solidfill,black);
bar(0,0,640,480);
setcolor(red);
outtextxy(280,200,'Game Over!');
setcolor(7); str(score,st); s:='Your final score:'+st;
outtextxy(240,230,s);
setcolor(9);
if score<=5 then outtextxy(240,270,'Rank: Great Noob');
if (score>5) and (score<=10) then outtextxy(240,270,'Rank: Noob');
if (score>10) and (score<=15) then outtextxy(240,270,'Rank: Little Noob');
if (score>15) and (score<=20) then outtextxy(240,270,'Rank: Great Bot');
if (score>20) and (score<=25) then outtextxy(240,270,'Rank: Bot');
if (score>25) and (score<=30) then outtextxy(240,270,'Rank: Little Bot');
if (score>30) and (score<=35) then outtextxy(240,270,'Rank: Great Looser');
if (score>35) and (score<=40) then outtextxy(240,270,'Rank: Looser');
if (score>40) and (score<=45) then outtextxy(240,270,'Rank: Little Looser');
if (score>45) and (score<=60) then outtextxy(240,270,'Rank: Goblin');
if (score>60) and (score<=80) then outtextxy(240,270,'Rank: Child');
if (score>80) and (score<=105) then outtextxy(240,270,'Rank: Teen');
if (score>105) and (score<=135) then outtextxy(240,270,'Rank: Adult');
if (score>135) and (score<=170) then outtextxy(240,270,'Rank: Young');
if (score>170) and (score<=210) then outtextxy(240,270,'Rank: Novice');
if (score>210) and (score<=255) then outtextxy(240,270,'Rank: Player');
if (score>255) and (score<=305) then outtextxy(240,270,'Rank: Extended');
if (score>305) and (score<=360) then outtextxy(240,270,'Rank: Cool boy');
if (score>360) and (score<=420) then outtextxy(240,270,'Rank: Smart boy');
if (score>420) and (score<=485) then outtextxy(240,270,'Rank: Crazy boy');
if (score>485) and (score<=555) then outtextxy(240,270,'Rank: Mega Gamer');
if (score>555) and (score<=630) then outtextxy(240,270,'Rank: Father');
if (score>630) and (score<=710) then outtextxy(240,270,'Rank: Master');
if (score>710) and (score<=795) then outtextxy(240,270,'Rank: Craftsman');
if (score>795) and (score<=885) then outtextxy(240,270,'Rank: Expert');
if (score>885) and (score<=980) then outtextxy(240,270,'Rank: Ace');
if score>980 then outtextxy(270,230,'Rank: Winner');
setcolor(green);
outtextxy(240,330,'Press Enter to exit');
readln;
closegraph;
exit;
End.